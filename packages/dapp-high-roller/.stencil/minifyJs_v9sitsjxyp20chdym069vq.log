import*as tslib_1 from"../polyfills/tslib.js";import{h}from"../app.core.js";var AppGameCoin=function(){function e(){this.coins=[],this.delay=0,this.speed=0,this.x=0,this.index=0,this.animating=!0,this.set=Math.floor(3*Math.random()),this.index=Math.floor(3*Math.random())}return e.prototype.componentWillLoad=function(){this.switchImage()},e.prototype.componentDidUnload=function(){this.animating=!1},e.prototype.switchImage=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(e,100+Math.floor(150*Math.random()))})];case 1:return e.sent(),this.index+=1,this.index>=Object.keys(this.coins[this.set]).length&&(this.index=0),this.animating&&this.switchImage(),[2]}})})},e.prototype.render=function(){return h("img",{class:"coin",src:this.coins[this.set][this.index],style:{left:this.x+"%",animationDelay:this.delay+"s",animationDuration:this.speed+"s"}})},Object.defineProperty(e,"is",{get:function(){return"app-game-coin"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{coins:{type:"Any",attr:"coins"},delay:{type:Number,attr:"delay"},index:{state:!0},speed:{type:Number,attr:"speed"},x:{type:Number,attr:"x"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"/**style-placeholder:app-game-coin:**/"},enumerable:!0,configurable:!0}),e}(),AppGameCoins=function(){function e(){this.preloadCoins()}return e.prototype.preloadCoins=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var e;return tslib_1.__generator(this,function(t){switch(t.label){case 0:return e=this,[4,Promise.all([["02","11","12","06"],["10","07","04","07"],["03","09","08","02"]].map(function(e){return Promise.all(e.map(function(e){return new Promise(function(t){var n=new Image,i=document.createElement("canvas"),r=i.getContext("2d")||new CanvasRenderingContext2D;n.onload=function(){i.width=n.naturalWidth,i.height=n.naturalHeight,r.drawImage(n,0,0),t(i.toDataURL("image/png"))},n.src="./assets/images/coins/"+e+".png"})}))}))];case 1:return e.coins=t.sent(),[2]}})})},e.prototype.render=function(){var e=this,t=Math.min(50,Math.max(20,screen.width*screen.height/1e4));return this.coins?h("div",{class:"coins"},Array.from({length:t}).map(function(){return h("div",{class:"coins__coin"},h("app-game-coin",{coins:e.coins,delay:3*Math.random(),speed:1.5+1*Math.random(),x:120*Math.random()-20}))})):void 0},Object.defineProperty(e,"is",{get:function(){return"app-game-coins"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{coins:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"/**style-placeholder:app-game-coins:**/"},enumerable:!0,configurable:!0}),e}();export{AppGameCoin,AppGameCoins};