{"moduleFile":{"sourceFilePath":"/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/components/account/account-deposit/account-deposit.tsx","localImports":["/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/data/account","/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/data/app-registry","/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/data/counterfactual","/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/data/wallet"],"externalImports":["@stencil/core","@stencil/router","@stencil/state-tunnel","ethers","ethers/utils"],"potentialCmpRefs":[{"tag":"stencil-router-redirect"},{"tag":"widget-spinner"},{"tag":"widget-screen"},{"tag":"account-eth-form"}],"cmpMeta":{"tagNameMeta":"account-deposit","stylesMeta":{"$":{"externalStyles":[{"absolutePath":"/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/components/account/account-deposit/account-deposit.scss","cmpRelativePath":"account-deposit.scss","originalComponentPath":"account-deposit.scss"}]}},"assetsDirsMeta":[],"hostMeta":{},"dependencies":[],"jsdoc":{"name":"AccountDeposit","tags":[],"documentation":"","type":"typeof AccountDeposit"},"encapsulationMeta":1,"componentClass":"AccountDeposit","membersMeta":{"el":{"memberType":64},"error":{"memberType":16},"stage":{"memberType":16},"amountDeposited":{"memberType":16},"ethWeb3WalletBalance":{"memberType":1,"attribName":"eth-web-3-wallet-balance","attribType":{"text":"BigNumber | number","required":false,"optional":false,"typeReferences":{"BigNumber":{"referenceLocation":"import","importReferenceLocation":"ethers/utils"}}},"reflectToAttrib":false,"propType":8,"jsdoc":{"name":"ethWeb3WalletBalance","tags":[],"documentation":"","type":"BigNumber | number","default":"0"}},"user":{"memberType":1,"attribName":"user","attribType":{"text":"UserSession","required":false,"optional":false,"typeReferences":{"UserSession":{"referenceLocation":"import","importReferenceLocation":"../../../types"}}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"user","tags":[],"documentation":"","type":"{ id: string; username: string; ethAddress: string; nodeAddress: string; email: string; multisigAddress: string; transactionHash: string; token?: string; }","default":"{} as UserSession"}},"updateAccount":{"memberType":1,"attribName":"update-account","attribType":{"text":"(e) => void","required":false,"optional":false,"typeReferences":{}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"updateAccount","tags":[],"documentation":"","type":"(e: any) => void","default":"e => {}"}},"history":{"memberType":1,"attribName":"history","attribType":{"text":"RouterHistory","required":false,"optional":false,"typeReferences":{"RouterHistory":{"referenceLocation":"import","importReferenceLocation":"@stencil/router"}}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"history","tags":[],"documentation":"","type":"RouterHistory","default":"{} as RouterHistory"}},"signer":{"memberType":1,"attribName":"signer","attribType":{"text":"Signer","required":false,"optional":false,"typeReferences":{"Signer":{"referenceLocation":"import","importReferenceLocation":"ethers"}}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"signer","tags":[],"documentation":"","type":"Signer","default":"{} as Signer"}},"deposit":{"memberType":1,"attribName":"deposit","attribType":{"text":"(valueInWei: BigNumber) => void","required":false,"optional":false,"typeReferences":{"BigNumber":{"referenceLocation":"import","importReferenceLocation":"ethers/utils"}}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"deposit","tags":[],"documentation":"","type":"(valueInWei: BigNumber) => void","default":"() => {}"}},"canUseApps":{"memberType":1,"attribName":"can-use-apps","attribType":{"text":"Boolean","required":false,"optional":false,"typeReferences":{"Boolean":{"referenceLocation":"global"}}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"canUseApps","tags":[],"documentation":"","type":"Boolean","default":"false"},"watchCallbacks":["onDepositFinished"]}},"eventsMeta":[],"listenersMeta":[]},"hasSlot":false,"hasSvg":false,"jsFilePath":"/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/components/account/account-deposit/account-deposit.js"},"jsText":"import AccountTunnel from \"../../../data/account\";\r\nimport AppRegistryTunnel from \"../../../data/app-registry\";\r\nimport CounterfactualNode from \"../../../data/counterfactual\";\r\nimport WalletTunnel from \"../../../data/wallet\";\r\nexport class AccountDeposit {\r\n    constructor() {\r\n        this.ethWeb3WalletBalance = 0;\r\n        this.user = {};\r\n        this.updateAccount = e => { };\r\n        this.history = {};\r\n        this.signer = {};\r\n        this.deposit = () => { };\r\n        this.canUseApps = false;\r\n        this.error = \"\";\r\n        this.stage = \"ready\";\r\n    }\r\n    componentDidUpdate() {\r\n        if (!this.user || !this.user.id) {\r\n            this.history.push(\"/\");\r\n            return;\r\n        }\r\n    }\r\n    onDepositFinished() {\r\n        this.stage = \"finished\";\r\n    }\r\n    get node() {\r\n        return CounterfactualNode.getInstance();\r\n    }\r\n    async formSubmitionHandler(e) {\r\n        this.amountDeposited = window[\"ethers\"].utils.parseEther(e.target.value);\r\n        try {\r\n            this.stage = \"depositing\";\r\n            await this.deposit(this.amountDeposited);\r\n        }\r\n        catch (error) {\r\n            this.error = error.message;\r\n            this.stage = \"ready\";\r\n        }\r\n    }\r\n    render() {\r\n        if (this.stage === \"finished\") {\r\n            return h(\"stencil-router-redirect\", { url: \"/\" });\r\n        }\r\n        if (!this.ethWeb3WalletBalance) {\r\n            return h(\"widget-spinner\", { type: \"dots\" });\r\n        }\r\n        const buttonTexts = {\r\n            ready: \"Deposit\",\r\n            depositing: \"Making deposit...\"\r\n        };\r\n        const isFormBusy = this.stage === \"depositing\";\r\n        return (h(\"widget-screen\", { exitable: false },\r\n            h(\"div\", { slot: \"header\" }, \"Fund your account\"),\r\n            h(\"p\", { class: \"details\" }, \"In order to use the Playground Dapps, you need to deposit funds into your account. Please enter how much ETH you want to deposit:\"),\r\n            h(\"account-eth-form\", { onSubmit: this.formSubmitionHandler.bind(this), autofocus: true, provideFaucetLink: true, button: buttonTexts[this.stage], available: window[\"ethers\"].utils.bigNumberify(this.ethWeb3WalletBalance), min: 0.1, max: 1, error: this.error, loading: isFormBusy, disabled: isFormBusy })));\r\n    }\r\n    static get is() { return \"account-deposit\"; }\r\n    static get encapsulation() { return \"shadow\"; }\r\n    static get properties() { return {\r\n        \"amountDeposited\": {\r\n            \"state\": true\r\n        },\r\n        \"canUseApps\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"can-use-apps\",\r\n            \"watchCallbacks\": [\"onDepositFinished\"]\r\n        },\r\n        \"deposit\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"deposit\"\r\n        },\r\n        \"el\": {\r\n            \"elementRef\": true\r\n        },\r\n        \"error\": {\r\n            \"state\": true\r\n        },\r\n        \"ethWeb3WalletBalance\": {\r\n            \"type\": Number,\r\n            \"attr\": \"eth-web-3-wallet-balance\"\r\n        },\r\n        \"history\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"history\"\r\n        },\r\n        \"signer\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"signer\"\r\n        },\r\n        \"stage\": {\r\n            \"state\": true\r\n        },\r\n        \"updateAccount\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"update-account\"\r\n        },\r\n        \"user\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"user\"\r\n        }\r\n    }; }\r\n    static get style() { return \"/**style-placeholder:account-deposit:**/\"; }\r\n}\r\nAccountTunnel.injectProps(AccountDeposit, [\"updateAccount\", \"user\", \"deposit\"]);\r\nAppRegistryTunnel.injectProps(AccountDeposit, [\"canUseApps\"]);\r\nWalletTunnel.injectProps(AccountDeposit, [\"signer\", \"ethWeb3WalletBalance\"]);\r\n"}