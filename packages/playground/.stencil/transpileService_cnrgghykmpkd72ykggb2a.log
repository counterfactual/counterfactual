{"moduleFile":{"sourceFilePath":"/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/components/node-listener/dialogs/propose-install/dialog-propose-install.tsx","localImports":["/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/data/app-registry","/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/data/playground-api-client"],"externalImports":["@stencil/core"],"potentialCmpRefs":[{"tag":"widget-dialog"}],"cmpMeta":{"tagNameMeta":"dialog-propose-install","stylesMeta":{},"assetsDirsMeta":[],"hostMeta":{},"dependencies":[],"jsdoc":{"name":"DialogProposeInstall","tags":[],"documentation":"","type":"typeof DialogProposeInstall"},"encapsulationMeta":1,"componentClass":"DialogProposeInstall","membersMeta":{"el":{"memberType":64},"user":{"memberType":16},"message":{"memberType":1,"attribName":"message","attribType":{"text":"any","required":false,"optional":false,"typeReferences":{}},"reflectToAttrib":false,"propType":1,"jsdoc":{"name":"message","tags":[],"documentation":"","type":"any"}},"onAccept":{"memberType":1,"attribName":"on-accept","attribType":{"text":"(message: any) => void","required":false,"optional":false,"typeReferences":{}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"onAccept","tags":[],"documentation":"","type":"(message: any) => void","default":"() => {}"}},"onReject":{"memberType":1,"attribName":"on-reject","attribType":{"text":"() => void","required":false,"optional":false,"typeReferences":{}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"onReject","tags":[],"documentation":"","type":"() => void","default":"() => {}"}},"apps":{"memberType":1,"attribName":"apps","attribType":{"text":"AppDefinition[]","required":false,"optional":false,"typeReferences":{"AppDefinition":{"referenceLocation":"import","importReferenceLocation":"../../../../types"}}},"reflectToAttrib":false,"propType":0,"jsdoc":{"name":"apps","tags":[],"documentation":"","type":"AppDefinition[]","default":"[]"}}},"eventsMeta":[],"listenersMeta":[]},"hasSlot":false,"hasSvg":false,"jsFilePath":"/home/arjun/repositories/counterfactual/monorepo/packages/playground/src/components/node-listener/dialogs/propose-install/dialog-propose-install.js"},"jsText":"import AppRegistryTunnel from \"../../../../data/app-registry\";\r\nimport PlaygroundAPIClient from \"../../../../data/playground-api-client\";\r\nconst KOVAN_NETWORK_ID = \"42\";\r\nexport class DialogProposeInstall {\r\n    constructor() {\r\n        this.el = {};\r\n        this.onAccept = () => { };\r\n        this.onReject = () => { };\r\n        this.apps = [];\r\n        this.user = {};\r\n    }\r\n    async componentWillLoad() {\r\n        if (this.message.data) {\r\n            this.user = await PlaygroundAPIClient.getUserByNodeAddress(this.message.data.proposedByIdentifier);\r\n        }\r\n    }\r\n    render() {\r\n        const app = this.apps.find(app => {\r\n            return (app.id[KOVAN_NETWORK_ID] === this.message.data.params.appDefinition);\r\n        });\r\n        if (!app) {\r\n            throw Error(\"You've received an installation proposal from a different Ethereum network\");\r\n        }\r\n        return (h(\"widget-dialog\", { visible: true, dialogTitle: \"You've been invited to play!\", content: h(\"label\", null,\r\n                \"You'll need to deposit\",\r\n                h(\"br\", null),\r\n                h(\"strong\", null,\r\n                    window[\"ethers\"].utils.formatEther(this.message.data.params.initiatorDeposit),\r\n                    \" \",\r\n                    \"ETH\"),\r\n                \" \",\r\n                \"to play \",\r\n                h(\"strong\", null, app.name),\r\n                \" with\",\r\n                \" \",\r\n                h(\"strong\", null, this.user.username),\r\n                \".\"), primaryButtonText: \"Accept\", onPrimaryButtonClicked: () => this.onAccept(this.message), secondaryButtonText: \"Reject\", onSecondaryButtonClicked: () => this.onReject() }));\r\n    }\r\n    static get is() { return \"dialog-propose-install\"; }\r\n    static get encapsulation() { return \"shadow\"; }\r\n    static get properties() { return {\r\n        \"apps\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"apps\"\r\n        },\r\n        \"el\": {\r\n            \"elementRef\": true\r\n        },\r\n        \"message\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"message\"\r\n        },\r\n        \"onAccept\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"on-accept\"\r\n        },\r\n        \"onReject\": {\r\n            \"type\": \"Any\",\r\n            \"attr\": \"on-reject\"\r\n        },\r\n        \"user\": {\r\n            \"state\": true\r\n        }\r\n    }; }\r\n}\r\nAppRegistryTunnel.injectProps(DialogProposeInstall, [\"apps\"]);\r\n"}